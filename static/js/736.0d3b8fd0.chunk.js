"use strict";(self.webpackChunkpokemon=self.webpackChunkpokemon||[]).push([[736],{258:(e,s,a)=>{a.r(s),a.d(s,{default:()=>y});var t=a(950),r=a(555),n=a(778);const c=a.p+"static/media/ball.1b69577ccebeb2fa276a.png";var i=a(364),o=a(561),l=a(414);const d=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),(0,l.jsxs)("div",{className:"skeleton",children:[(0,l.jsxs)("div",{className:"pulse skeleton__header",children:[(0,l.jsx)("div",{className:"pulse skeleton__circle"}),(0,l.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,l.jsx)("div",{className:"pulse skeleton__block"}),(0,l.jsx)("div",{className:"pulse skeleton__block"}),(0,l.jsx)("div",{className:"pulse skeleton__block"})]})]}),m=(e,s,a)=>{switch(e){case"waiting":return(0,l.jsx)(d,{});case"loading":return(0,l.jsx)(o.A,{});case"confirmed":return(0,l.jsx)(s,{data:a});case"error":return(0,l.jsx)(i.A,{});default:throw new i.A("Unexpected process")}},h=e=>{let{data:s}=e;const{name:a,description:t,thumbnail:r,homepage:n,wiki:c}=s;return(0,l.jsxs)("div",{className:"randomchar__block",children:[(0,l.jsx)("img",{src:r,alt:"Random character",className:"randomchar__img"}),(0,l.jsxs)("div",{className:"randomchar__info",children:[(0,l.jsx)("p",{className:"randomchar__name",children:a}),(0,l.jsx)("p",{className:"randomchar__descr",children:t}),(0,l.jsxs)("div",{className:"randomchar__btns",children:[(0,l.jsx)("a",{href:n,className:"button button__main",children:(0,l.jsx)("div",{className:"inner",children:"Homepage"})}),(0,l.jsx)("a",{href:c,className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},u=()=>{const[e,s]=(0,t.useState)({}),{loading:a,error:i,getCharacter:o,getCharacterImage:d,clearError:u,process:x,setProcess:_}=(0,n.A)();(0,t.useEffect)(()=>{j();const e=setInterval(j,6e4);return()=>{clearInterval(e)}},[]);const j=async()=>{const e=Math.floor(8*Math.random()+1);u();try{const t=await o(e),n=await d(e);a=(0,r.A)((0,r.A)({},t),{},{thumbnail:n}),s(e=>(0,r.A)((0,r.A)({},e),a)),_("confirmed")}catch(t){_("error")}var a};return(0,l.jsxs)("div",{className:"randomchar",children:[m(x,h,e),(0,l.jsxs)("div",{className:"randomchar__static",children:[(0,l.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",(0,l.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,l.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),(0,l.jsx)("button",{className:"button button__main",children:(0,l.jsx)("div",{className:"inner",onClick:j,children:"try it"})}),(0,l.jsx)("img",{src:c,alt:"mjolnir",className:"randomchar__decoration"})]})]})};var x=a(63),_=a(386);const j=e=>{const[s,a]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),[m,h]=(0,t.useState)(0),[u,j]=(0,t.useState)(!1),{getAllCharacters:p,getCharacterImage:g,process:f,setProcess:v}=(0,n.A)(),b=(0,t.useRef)([]);(0,t.useEffect)(()=>{N(m,!0)},[]);const N=async(e,s)=>{d(!s);try{const s=await p(e),a=await Promise.all(s.map(async e=>{const s=e.url.split("/").at(-2),a=await g(s);return(0,r.A)((0,r.A)({},e),{},{id:s,thumbnail:a})}));w(a),v("confirmed")}catch(a){console.error(a),d(!1),v("error")}},w=e=>{const s=e.length<9;a(s=>[...s,...e]),d(!1),h(e=>e+9),j(s)},k=e=>{b.current.forEach(e=>{e&&e.classList.remove("char__item_selected")}),b.current[e]&&(b.current[e].classList.add("char__item_selected"),b.current[e].focus())},y=(0,t.useMemo)(()=>((e,s,a)=>{switch(e){case"waiting":return(0,l.jsx)(o.A,{});case"loading":return a?(0,l.jsx)(s,{}):(0,l.jsx)(o.A,{});case"confirmed":return(0,l.jsx)(s,{});case"error":return(0,l.jsx)(i.A,{});default:throw new i.A("Unexpected process")}})(f,()=>(s=>{const a=s.map((s,a)=>{let{name:t,id:r,thumbnail:n}=s;return(0,l.jsx)(x.A,{classNames:"fade",timeout:600,children:(0,l.jsxs)("li",{ref:e=>b.current[a]=e,tabIndex:0,onClick:()=>{e.onCharSelected(r),k(a)},onKeyDown:s=>{" "!==s.key&&"Enter"!==s.key||(e.onCharSelected(r),k(a))},className:"char__item",children:[(0,l.jsx)("img",{src:n,alt:t}),(0,l.jsx)("div",{className:"char__name",children:t})]},r)})});return(0,l.jsx)("ul",{className:"char__grid",children:(0,l.jsx)(_.A,{component:null,children:a})})})(s),c),[f]);return(0,l.jsxs)("div",{className:"char__list",children:[y,(0,l.jsx)("button",{onClick:()=>N(m),disabled:c,style:{display:u?"none":"block"},className:"button button__main button__long",children:(0,l.jsx)("div",{className:"inner",children:"load more"})})]})},p=e=>{let{data:s}=e;const{name:a,description:t,homepage:r,wiki:n,thumbnail:c,games:i}=s;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"char__basics",children:[(0,l.jsx)("img",{src:c,alt:"abyss"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"char__info-name",children:a}),(0,l.jsxs)("div",{className:"char__btns",children:[(0,l.jsx)("a",{href:r,className:"button button__main",children:(0,l.jsx)("div",{className:"inner",children:"homepage"})}),(0,l.jsx)("a",{href:n,className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),(0,l.jsx)("div",{className:"char__descr",children:t})]})},g=e=>{const[s,a]=(0,t.useState)(null),{getCharacter:c,getCharacterImage:i,clearError:o,process:d,setProcess:h}=(0,n.A)();(0,t.useEffect)(()=>{u()},[e.charId]);const u=async()=>{const{charId:s}=e;if(s){o();try{const e=await c(s),t=await i(s);a((0,r.A)((0,r.A)({},e),{},{thumbnail:t})),h("confirmed")}catch(t){h("error")}}};return(0,l.jsx)("div",{className:"char__info",children:m(d,p,s)})};var f=a(125),v=a(714),b=a(74);const N=e=>{const[s,a]=(0,t.useState)(""),[r,c]=(0,t.useState)([]),{loading:i,error:o,getAllCharacters:d}=(0,n.A)();return(0,l.jsxs)("div",{className:"form__basic",children:[(0,l.jsx)("div",{className:"form__heading",children:"Or find a character by name::"}),(0,l.jsx)(f.l1,{initialValues:{name:""},validationSchema:v.Ik({name:v.Yj().required("This field is required")}),onSubmit:e=>{(async e=>{const s=await d();c(s);const t=s.filter(s=>s.name.indexOf(e.name)>-1);t.length>0?(a({text:"There is! Visit ".concat(t[0].name," page?"),status:"success",id:t[0].url.split("/").at(-2)}),console.log("get")):(a({text:"The character was not found. Check the name and try again",status:"error"}),console.log("didnt get"))})(e)},children:e=>{let{isSubmitting:a}=e;return(0,l.jsxs)(f.lV,{children:[(0,l.jsxs)("div",{className:"form__char",children:[(0,l.jsx)(f.D0,{id:"name",name:"name",type:"text",placeholder:"Enter name"}),(0,l.jsx)("button",{className:"button button__main",type:"submit",children:(0,l.jsx)("div",{className:"inner",children:"Find"})})]}),(0,l.jsx)(f.Kw,{name:"name",component:"div",className:"error"}),"success"===s.status?(0,l.jsxs)("div",{className:"form__result",children:[(0,l.jsx)("div",{className:"success",children:s.text}),(0,l.jsx)(b.N_,{to:"/single/".concat(s.id,"?type=char"),className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"TO PAGE"})})]}):(0,l.jsx)("div",{className:"error",children:s.text})]})}})]})};class w extends t.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e,s){this.setState({error:!0})}render(){return this.state.error?(0,l.jsx)(i.A,{}):this.props.children}}const k=w,y=()=>{const[e,s]=(0,t.useState)(null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u,{}),(0,l.jsxs)("div",{className:"char__content",children:[(0,l.jsx)(k,{children:(0,l.jsx)(j,{onCharSelected:e=>{s(e)}})}),(0,l.jsxs)("div",{className:"right",children:[(0,l.jsx)(k,{children:(0,l.jsx)(g,{charId:e})}),(0,l.jsx)(N,{})]})]})]})}},364:(e,s,a)=>{a.d(s,{A:()=>n});const t=a.p+"static/media/error.57e580541074e364dd1c.gif";var r=a(414);const n=()=>(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)("img",{src:t,alt:"Error",style:{display:"block",width:"100px",height:"100px",margin:"0 auto",objectFit:"contain"}})})},778:(e,s,a)=>{a.d(s,{A:()=>r});var t=a(950);const r=()=>{const e="https://pokeapi.co/api/v2/",{loading:s,error:a,request:r,clearError:n,process:c,setProcess:i}=(()=>{const[e,s]=(0,t.useState)("waiting");return{request:(0,t.useCallback)(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json"};s("loading");try{const s=await fetch(e,{method:a,body:t,headers:r});if(!s.ok)throw new Error("Could not fetch ".concat(e,", status: ").concat(s.status));return await s.json()}catch(n){throw s("error"),n}},[]),clearError:(0,t.useCallback)(()=>s("waiting")),process:e,setProcess:s}})(),o=e=>({name:e.name,description:e.flavor_text_entries[0].flavor_text?"".concat(e.flavor_text_entries[0].flavor_text.slice(0,500),"..."):"There is no description for this character",fulldescription:e.flavor_text_entries[0].flavor_text?e.flavor_text_entries[0].flavor_text:"There is no description for this character",homepage:"https://www.pokemon.com/us/pokedex/".concat(e.name),wiki:"https://bulbapedia.bulbagarden.net/wiki/".concat(e.name,"_(Pok\xe9mon)")}),l=e=>e.game_indices,d=e=>e.sprites.other["official-artwork"].front_default,m=e=>({name:e.name,url:e.url}),h=e=>({name:e.name,url:e.url}),u=e=>({name:e.name,url:e.url}),x=e=>e.sprites.default;return{loading:s,error:a,request:r,clearError:n,getAllCharacters:async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(await r("".concat(e,"pokemon-species/?limit=9&offset=").concat(s))).results.map(m)},getCharacter:async s=>{const a=await r("".concat(e,"pokemon-species/").concat(s));return o(a)},getCharacterImage:async s=>{const a=await r("".concat(e,"pokemon/").concat(s));return d(a)},getCharacterGames:async s=>{const a=await r("".concat(e,"pokemon/").concat(s));return l(a)},getAllItems:async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(await r("".concat(e,"item/?limit=20&offset=").concat(s))).results.map(h)},getItem:async s=>{const a=await r("".concat(e,"item/").concat(s));return u(a)},getItemsImage:async s=>{const a=await r("".concat(e,"item/").concat(s));return x(a)},process:c,setProcess:i}}}}]);